name: 'Setup OpenAPI Specs'
description: 'Downloads OpenAPI specs artifact to the root directory'
inputs:
  artifact-name:
    description: 'Name of the artifact containing OpenAPI specs'
    required: false
    default: 'openapi-specs'

runs:
  using: 'composite'
  steps:
    - name: Download OpenAPI Specs
      uses: actions/download-artifact@v4
      with:
        name: ${{ inputs.artifact-name }}
        path: .

    - name: Fix JSON file permissions
      shell: bash
      run: |
        if ls *.json 1> /dev/null 2>&1; then
          chmod 777 *.json
          echo "Set permissions to 777 for JSON files"
        else
          echo "No JSON files found to fix permissions"
        fi

    - name: Debug - Show Directory Contents
      shell: bash
      run: |
        echo "Current directory: $(pwd)"
        echo "Directory contents:"
        ls -la
        echo "OpenAPI spec files:"
        ls -la *.json 2>/dev/null || echo "No JSON files found"
